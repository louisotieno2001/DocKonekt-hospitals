<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Schedules</title>
  <link rel="stylesheet" href="styles/index.css">
  <link rel="stylesheet" href="styles/small-devices.css">
  <link rel="icon" href="./res/Picture4.png" type="image/x-icon">
  <!-- SEO Meta Tags -->
  <meta name="description"
    content="Welcome to DocKonekt. Search for your hospital below or scroll down to pick a hospital.">
  <meta name="keywords" content="DocKonekt, hospital, health, search">
  <meta name="author" content="Futurion Labs">

  <!-- Open Graph Protocol for Social Media Sharing -->
  <meta property="og:title" content="DocKonekt">
  <meta property="og:description"
    content="Welcome to DocKonekt. Search for your hospital below or scroll down to pick a hospital.">
  <meta property="og:image" content="https://dockonekt.com/app/public/res/Picture4.png">
  <meta property="og:url" content="https://dockonekt.com">
  <meta property="og:type" content="website">

  <!-- Twitter Card for Twitter Sharing -->
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@louiso_chieng1">
  <meta name="twitter:title" content="DocKonekt">
  <meta name="twitter:description"
    content="Welcome to DocKonekt. Search for your hospital below or scroll down to pick a hospital.">
  <meta name="twitter:image" content="https://dockonekt.com/app/public/res/Picture4.png">
  <style>
    /* Add your CSS styling here */

    body {
      overflow-x: hidden;
    }

    .card {
      border: 2px solid #424242;
      padding: 10px;
      border-radius: 5px;
      color: aliceblue;
      margin: 15px;
      width: 98%;
      /* Make the card full width */
      background-color: #212121;
      /* White background */
      box-sizing: border-box;
      /* Include padding and border in the element's total width and height */
    }

    button {
      background-color: #4CAF50;
      color: white;
      padding: 10px;
      border: none;
      border-radius: 5px;
      cursor: pointer;
    }
  </style>
</head>

<body>
  <div class="top_bar">
    <img src="./res/Picture4.png" alt="logo" class="logo">
    <ul class="menu-items" id="menu-items">
      <li><a href="index.html">Swtch User</a></li>
      <li><a href="doctor-home.html">Home</a></li>
      <li><a href="https://dockonekt.com/blogs">Health Blog</a></li>
    </ul>
    <img src="./res/menu_icon.png" alt="menu_icon" class="menu_icon" id="menu_icon">
    <div class="profile">
      <img src="./res/photo.avif" alt="Profile image">
    </div>
  </div>
  <div class="booking">
    <!-- <h1>Below are all the appointment slots for the day</h1> -->
    <div class="schedule-container" id="schedule-container">
      <div class="blogtitle"></div>
    </div>
    <div class="blogtitle"></div>
  </div>
  <div class="blogtitle"></div>
  <div class="bottom_bar">
    <footer class="footer">
      <center>
        <p>Follow us on social media below</p>
      </center>
      <div class="socials">
        <li class="socials_lin"><a href="https://www.linkedin.com/company/futurionlabs/?viewAsMember=true"
            target="_blank"><img src="res/linkedin.png" alt="LinkedIn"></a></li>
        <li class="socials_fb"><a href="https://www.facebook.com/profile.php?id=61551541325742" target="_blank"><img
              src="res/Facebook.png" alt="Facebook"></a></li>
        <li class="socials_ig"><a href="https://www.instagram.com/futurion_labs123/" target="_blank"><img
              src="res/Instagram.png" alt="Instagram"></a></li>
        <li class="socials_wa"><a href="https://wa.me/254746852485" target="_blank"><img src="res/icon-whatsapp.webp"
              alt="Whatsapp"></a></li>
        <li class="socials_tw"><a href="https://twitter.com/louiso_chieng1" target="_blank"><img src="res/x.jpg"
              alt="twitter"></a></li>
      </div>
      <p>Copyright&copy;2024 Made at <a href="https://futurionlab.com">Futurion Labs</a>. All rights reserved</p>
    </footer>
  </div>
  <script>
    document.addEventListener('DOMContentLoaded', async function () {
      const menuIcon = document.getElementById('menu_icon');
      const menuItems = document.getElementById('menu-items');
      const scheduleContainer = document.getElementById('schedule-container');

      try {
        const response = await fetch('/api/schedules');
        const schedules = await response.json();
        console.log(response);

        if (response.ok) {
          schedules.forEach(schedule => {
            const card = document.createElement('div');
            card.classList.add('card');

            card.innerHTML = `
                      <h2>${schedule.doctor_name}</h2>
                      <p>Speciality: ${schedule.speciality}</p>
                      <p>Time Available: ${schedule.time_available}</p>
                      <p>General Price: ${schedule.general_price}</p>
                    `;

            const button = document.createElement('button');
            button.textContent = `Contact ${schedule.doctor_name}`;
            button.addEventListener('click', function () {
              //   alert(`Book appointment for ${schedule.doctor_name}`);
            });

            button.style.display = 'none';

            card.appendChild(button);
            scheduleContainer.appendChild(card);
          });

          //   window.confirm("All ok");
        } else {
          window.confirm("All not ok");
        }
      } catch (error) {
        console.error('Error fetching schedule data:', error);
        window.confirm("Can't fetch schedule data from the server");
      }

      menuIcon.addEventListener('click', function () {
        menuItems.classList.toggle('show');
      });
    });     
  </script>
</body>

</html>