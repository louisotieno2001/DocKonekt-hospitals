<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Authentication</title>
    <link rel="stylesheet" href="styles/index.css">
    <link rel="stylesheet" href="styles/small-devices.css">
    <link rel="icon" href="./res/Picture4.png" type="image/x-icon">
    <!-- SEO Meta Tags -->
    <meta name="description"
        content="Welcome to DocKonekt. Search for your hospital below or scroll down to pick a hospital.">
    <meta name="keywords" content="DocKonekt, hospital, health, search">
    <meta name="author" content="Futurion Labs">

    <!-- Open Graph Protocol for Social Media Sharing -->
    <meta property="og:title" content="DocKonekt">
    <meta property="og:description"
        content="Welcome to DocKonekt. Search for your hospital below or scroll down to pick a hospital.">
    <meta property="og:image" content="https://dockonekt.com/app/public/res/Picture4.png">
    <meta property="og:url" content="https://dockonekt.com">
    <meta property="og:type" content="website">

    <!-- Twitter Card for Twitter Sharing -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:site" content="@louiso_chieng1">
    <meta name="twitter:title" content="DocKonekt">
    <meta name="twitter:description"
        content="Welcome to DocKonekt. Search for your hospital below or scroll down to pick a hospital.">
    <meta name="twitter:image" content="https://dockonekt.com/app/public/res/Picture4.png">
</head>

<body>
    <div class="verification">
        <h1>Doctor verification</h1>
        <form action="#" method="" id="verification-form" class="verification-form">
            <label for="email">Email address:</label> <br>
            <input type="text" id="email" placeholder="Enter your email address"> <br>
            <label for="secret-code">Secret code:</label> <br>
            <input type="text" id="secret-code" placeholder="Enter the secret code">
            <button class="button-9" type="button" id="verification">Verify</button>
        </form>

        <script>
            document.addEventListener('DOMContentLoaded', () => {
                const verificationForm = document.getElementById('verification-form');
                const emailInput = document.getElementById('email');
                const secretCodeInput = document.getElementById('secret-code');
                const verificationButton = document.getElementById('verification');

                verificationButton.addEventListener('click', () => {
                    const email = emailInput.value.trim();
                    const secretCode = secretCodeInput.value.trim();

                    if (email && secretCode) {
                        // Send the email and secret code to the server for verification
                        fetch('/api/verify-doctor', {
                            method: 'POST',
                            headers: {
                                'Content-Type': 'application/json',
                            },
                            body: JSON.stringify({ email, secretCode }),
                        })
                            .then(response => {
                                if (response.ok) {
                                    alert('Verification successful!');
                                    window.location.href = "doctor-home.html";
                                } else {
                                    alert('Verification failed. Please check your email and secret code.');
                                }
                            })
                            .catch(error => console.error('Error verifying doctor:', error));
                    } else {
                        alert('Please enter both email and secret code.');
                    }
                });
            });
        </script>
    </div>
</body>

</html>